(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bef97e6"],{"0636":function(e,t,a){e.exports=a.p+"static/web/img/receive-task.e1131038.svg"},"11fe":function(e,t,a){e.exports=a.p+"static/web/img/icon_receive.a6c46918.svg"},1492:function(e,t,a){},"1bb8":function(e,t,a){e.exports=a.p+"static/web/img/user-task.90bd34cf.svg"},2463:function(e,t,a){"use strict";var n=a("d76d"),i=a.n(n);i.a},"2a9f4":function(e,t,a){e.exports=a.p+"static/web/img/parallel-gateway.dfb4ebaf.svg"},"2d36":function(e,t,a){e.exports=a.p+"static/web/img/icon_script.07c7423e.svg"},"2f27":function(e,t,a){e.exports=a.p+"static/web/img/exclusive-gateway.56b82dfd.svg"},"31ac":function(e,t,a){e.exports=a.p+"static/web/img/icon_signal.0e96b3b6.svg"},"429a":function(e,t,a){"use strict";var n=a("1492"),i=a.n(n);i.a},"5ae6":function(e,t,a){},"8ee1":function(e,t,a){"use strict";var n=a("cae3"),i=a.n(n);i.a},"974b":function(e,t,a){e.exports=a.p+"static/web/img/end.9687f898.svg"},b2a8:function(e,t,a){},ba02:function(e,t,a){e.exports=a.p+"static/web/img/icon_message.01031aed.svg"},bd84:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[e.isView?e._e():a("ToolbarPanel",{ref:"toolbar"}),e._v(" "),a("div",{staticStyle:{display:"flex"}},[e.isView?e._e():a("ItemPanel",{ref:"addItemPanel",attrs:{height:e.height}}),e._v(" "),a("div",{ref:"canvas",staticClass:"canvasPanel",style:{height:e.height+"px",width:e.isView?"100%":"70%","border-bottom":e.isView?0:null}}),e._v(" "),e.isView?e._e():a("DetailPanel",{ref:"detailPanel",attrs:{height:e.height,model:e.selectedModel,"read-only":"edit"!==e.mode,users:e.users,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase,"signal-defs":e.processModel.signalDefs,"message-defs":e.processModel.messageDefs,"on-change":function(t,a){e.onItemCfgChange(t,a)}}})],1)],1)},i=[],o=a("bd86"),s=(a("55dd"),a("db72")),r=(a("ac6a"),a("c5f6"),a("9d67")),l=a.n(r);function c(e){switch(e){case"start":return"start-node";case"end":return"end-node";case"gateway":return"gateway-node";case"exclusiveGateway":return"exclusive-gateway-node";case"parallelGateway":return"parallel-gateway-node";case"inclusiveGateway":return"inclusive-gateway-node";case"timerStart":return"timer-start-node";case"messageStart":return"message-start-node";case"signalStart":return"signal-start-node";case"userTask":return"user-task-node";case"scriptTask":return"script-task-node";case"mailTask":return"mail-task-node";case"javaTask":return"java-task-node";case"receiveTask":return"receive-task-node";case"timerCatch":return"timer-catch-node";case"messageCatch":return"message-catch-node";case"signalCatch":return"signal-catch-node";default:return"task-node"}}a("7f7f");var d=a("d225"),u=a("b0b4"),h=a("503e"),p=a("e0ef"),g=a("3421"),m=function(){function e(){Object(d["a"])(this,e)}return Object(u["a"])(e,[{key:"getDefaultCfg",value:function(){return{_command:{zoomDelta:.1,queue:[],current:0,clipboard:[]}}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this;this._cfgs=this.getDefaultCfg(),this.list=[],this.queue=[],this.initCommands(),e.getCommands=function(){return t.get("_command").queue},e.getCurrentCommand=function(){var e=t.get("_command");return e.queue[e.current-1]},e.executeCommand=function(a,n){t.execute(a,e,n)},e.commandEnable=function(a){return t.enable(a,e)}}},{key:"registerCommand",value:function(e,t){if(this[e])h(this[e],t);else{var a=h({},{name:e,shortcutCodes:[],queue:!0,executeTimes:1,init:function(){},enable:function(){return!0},execute:function(e){this.snapShot=e.save(),this.selectedItems=e.get("selectedItems"),this.method&&(g(this.method)?e[this.method]():this.method(e))},back:function(e){e.read(this.snapShot),e.set("selectedItems",this.selectedItems)}},t);this[e]=a,this.list.push(a)}}},{key:"execute",value:function(e,t,a){var n=h({},this[e],a),i=this.get("_command");return n.enable(t)&&(n.init(),n.queue&&(i.queue.splice(i.current,i.queue.length-i.current,n),i.current++)),t.emit("beforecommandexecute",{command:n}),n.execute(t),t.emit("aftercommandexecute",{command:n}),n}},{key:"enable",value:function(e,t){return this[e].enable(t)}},{key:"destroyPlugin",value:function(){this._events=null,this._cfgs=null,this.list=[],this.queue=[],this.destroyed=!0}},{key:"initCommands",value:function(){var e=this;e.registerCommand("add",{enable:function(){return this.type&&this.addModel},execute:function(e){var t=e.add(this.type,this.addModel);1===this.executeTimes&&(this.addId=t.get("id"))},back:function(e){e.remove(this.addId)}}),e.registerCommand("update",{enable:function(){return this.itemId&&this.updateModel},execute:function(e){var t=e.findById(this.itemId);t&&(1===this.executeTimes&&(this.originModel=h({},t.getModel())),e.update(t,this.updateModel))},back:function(e){var t=e.findById(this.itemId);e.update(t,this.originModel)}}),e.registerCommand("delete",{enable:function(e){var t=e.getCurrentMode(),a=e.get("selectedItems");return"edit"===t&&a&&a.length>0},method:function(e){var t=e.get("selectedItems");e.emit("beforedelete",{items:t}),t&&t.length>0&&t.forEach((function(t){return e.remove(t)})),e.emit("afterdelete",{items:t})},shortcutCodes:["Delete","Backspace"]}),e.registerCommand("redo",{queue:!1,enable:function(t){var a=t.getCurrentMode(),n=e.get("_command");return"edit"===a&&n.current<n.queue.length},execute:function(t){var a=e.get("_command"),n=a.queue[a.current];n&&n.execute(t),a.current++},shortcutCodes:[["metaKey","shiftKey","z"],["ctrlKey","shiftKey","z"]]}),e.registerCommand("undo",{queue:!1,enable:function(t){var a=t.getCurrentMode();return"edit"===a&&e.get("_command").current>0},execute:function(t){var a=e.get("_command"),n=a.queue[a.current-1];n&&(n.executeTimes++,n.back(t)),a.current--},shortcutCodes:[["metaKey","z"],["ctrlKey","z"]]}),e.registerCommand("copy",{queue:!1,enable:function(e){var t=e.getCurrentMode(),a=e.get("selectedItems");return"edit"===t&&a&&a.length>0},method:function(t){var a=e.get("_command");a.clipboard=[];var n=t.get("selectedItems");if(n&&n.length>0){var i=t.findById(n[0]);i&&a.clipboard.push({type:i.get("type"),model:i.getModel()})}}}),e.registerCommand("paste",{enable:function(t){var a=t.getCurrentMode();return"edit"===a&&e.get("_command").clipboard.length>0},method:function(t){var a=e.get("_command");this.pasteData=p(a.clipboard[0]);var n=this.pasteData.model;n.x&&(n.x+=10),n.y&&(n.y+=10);var i=n.clazz,o=void 0===i?"userTask":i,s=(new Date).getTime(),r=o+s;n.id=r;var l=t.add(this.pasteData.type,n);l.toFront()}}),e.registerCommand("zoomIn",{queue:!1,enable:function(e){var t=e.getZoom(),a=e.get("maxZoom"),n=e.get("minZoom");return t<=a&&t>=n},execute:function(t){var a=e.get("_command"),n=t.get("maxZoom"),i=t.getZoom();this.originZoom=i;var o=i+a.zoomDelta;o>n&&(o=n),t.zoomTo(o)},back:function(e){e.zoomTo(this.originZoom)},shortcutCodes:[["metaKey","="],["ctrlKey","="]]}),e.registerCommand("zoomOut",{queue:!1,enable:function(e){var t=e.getZoom(),a=e.get("maxZoom"),n=e.get("minZoom");return t<=a&&t>=n},execute:function(t){var a=e.get("_command"),n=t.get("minZoom"),i=t.getZoom();this.originZoom=i;var o=i-a.zoomDelta;o<n&&(o=n),t.zoomTo(o)},back:function(e){e.zoomTo(this.originZoom)},shortcutCodes:[["metaKey","-"],["ctrlKey","-"]]}),e.registerCommand("resetZoom",{queue:!1,execute:function(e){var t=e.getZoom();this.originZoom=t,e.zoomTo(1)},back:function(e){e.zoomTo(this.originZoom)}}),e.registerCommand("autoFit",{queue:!1,execute:function(e){var t=e.getZoom();this.originZoom=t,e.fitView(5)},back:function(e){e.zoomTo(this.originZoom)}}),e.registerCommand("toFront",{queue:!1,enable:function(e){var t=e.get("selectedItems");return t&&t.length>0},execute:function(e){var t=e.get("selectedItems");if(t&&t.length>0){var a=e.findById(t[0]);a.toFront(),e.paint()}},back:function(e){}}),e.registerCommand("toBack",{queue:!1,enable:function(e){var t=e.get("selectedItems");return t&&t.length>0},execute:function(e){var t=e.get("selectedItems");if(t&&t.length>0){var a=e.findById(t[0]);a.toBack(),e.paint()}},back:function(e){}})}}]),e}(),f=m,v=a("1b95"),y=a("72fb"),b=a("14c8"),x=a("758e"),k=function(){function e(t){Object(d["a"])(this,e),this._cfgs=v(this.getDefaultCfg(),t)}return Object(u["a"])(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this;this.set("graph",e);var a=t.getEvents(),n={};y(a,(function(a,i){var o=b(t,a);n[i]=o,e.on(i,o)})),this._events=n,this.initEvents(),this.updateToolbar()}},{key:"getEvents",value:function(){return{afteritemselected:"updateToolbar",aftercommandexecute:"updateToolbar"}}},{key:"initEvents",value:function(){var e=this.get("graph"),t=this.get("container"),a=t.querySelectorAll("div > span[data-command]");y(a,(function(t,a){var n=t.getAttribute("data-command");t.addEventListener("click",(function(t){e.commandEnable(n)&&e.executeCommand(n)}))}))}},{key:"updateToolbar",value:function(){var e=this.get("graph"),t=this.get("container"),a=t.querySelectorAll("div > span[data-command]");y(a,(function(t,a){var n=t.getAttribute("data-command");e.commandEnable(n)?(x(t,{cursor:"pointer"}),x(t.children[0],{color:"#666"}),t.children[0].setAttribute("color","#666")):(x(t,{cursor:"default"}),x(t.children[0],{color:"#bfbfbf"}),t.children[0].setAttribute("color","#bfbfbf"))}))}},{key:"destroyPlugin",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}]),e}(),w=k,_=a("1b95"),C=a("72fb"),S=a("158c"),T=function(){function e(t){Object(d["a"])(this,e),this._cfgs=_(this.getDefaultCfg(),t)}return Object(u["a"])(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this.get("container"),a=S('<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="opacity:0"/>'),n=t.querySelectorAll("div > .el-collapse-item > .el-collapse-item__wrap > .el-collapse-item__content > img[data-item]");C(n,(function(t,n){var i=new Function("return "+t.getAttribute("data-item"))();t.addEventListener("dragstart",(function(t){t.dataTransfer.setDragImage(a,0,0),e.set("onDragAddNode",!0),e.set("addModel",i)})),t.addEventListener("dragend",(function(t){e.emit("canvas:mouseup",t),e.set("onDragAddNode",!1),e.set("addModel",null)}))}))}},{key:"destroy",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}]),e}(),D=T,E=a("1b95"),A=function(){function e(t){Object(d["a"])(this,e),this._cfgs=E(this.getDefaultCfg(),t)}return Object(u["a"])(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this.get("container");t.addEventListener("dragover",(function(t){e.emit("canvas:mousemove",t)})),t.addEventListener("dragleave",(function(t){e.emit("canvas:mouseleave",t)}))}},{key:"destroy",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}]),e}(),O=A,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toolbar"},[a("el-tooltip",{attrs:{content:e.i18n["tooltip.undo"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"undo"}},[a("span",{staticClass:"iconfont icon-undo"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.redo"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"redo"}},[a("span",{staticClass:"iconfont icon-redo"})])]),e._v(" "),a("span",{staticClass:"separator"}),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.copy"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"copy"}},[a("span",{staticClass:"iconfont icon-copy-o"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.paste"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"paste"}},[a("span",{staticClass:"iconfont icon-paster-o"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.delete"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"delete"}},[a("span",{staticClass:"iconfont icon-delete-o"})])]),e._v(" "),a("span",{staticClass:"separator"}),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomIn"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"zoomIn"}},[a("span",{staticClass:"iconfont icon-zoom-in-o"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomOut"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"zoomOut"}},[a("span",{staticClass:"iconfont icon-zoom-out-o"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomReset"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"resetZoom"}},[a("span",{staticClass:"iconfont icon-actual-size-o"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.autoFit"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"autoFit"}},[a("span",{staticClass:"iconfont icon-fit"})])]),e._v(" "),a("span",{staticClass:"separator"}),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.toFront"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"toFront"}},[a("span",{staticClass:"iconfont icon-to-front"})])]),e._v(" "),a("el-tooltip",{attrs:{content:e.i18n["tooltip.toBack"],placement:"bottom"}},[a("span",{staticClass:"command",attrs:{"data-command":"toBack"}},[a("span",{staticClass:"iconfont icon-to-back"})])])],1)},B=[],F={inject:["i18n"]},N=F,j=(a("e4c5"),a("2877")),P=Object(j["a"])(N,z,B,!1,null,"12b37731",null),M=P.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"itemPanel",style:{height:e.height+"px"}},[n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:e.i18n["conventional"],name:"1"}},[n("img",{staticStyle:{width:"42px",height:"42px","margin-top":"10px"},attrs:{"data-item":"{clazz:'start',size:'30*30',label:''}",src:a("c5d6")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["startEvent"]))]),e._v(" "),n("img",{staticStyle:{width:"80px",height:"44px","margin-top":"10px"},attrs:{"data-item":e.userTaskData,src:a("1bb8")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["userTask"]))]),e._v(" "),n("img",{staticStyle:{width:"80px",height:"44px","margin-top":"10px"},attrs:{"data-item":e.handleNodeData,src:a("0636")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["handleNode"]))]),e._v(" "),n("img",{staticStyle:{width:"42px",height:"42px","margin-top":"10px"},attrs:{"data-item":"{clazz:'end',size:'30*30',label:''}",src:a("974b")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["endEvent"]))])]),e._v(" "),n("el-collapse-item",{attrs:{title:e.i18n["gateway"],name:"3"}},[n("img",{staticStyle:{width:"48px",height:"48px","margin-top":"10px"},attrs:{"data-item":"{clazz:'exclusiveGateway',size:'40*40',label:''}",src:a("2f27")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["exclusiveGateway"]))]),e._v(" "),n("img",{staticStyle:{width:"48px",height:"48px","margin-top":"10px"},attrs:{"data-item":"{clazz:'parallelGateway',size:'40*40',label:''}",src:a("2a9f4")}}),e._v(" "),n("div",[e._v(e._s(e.i18n["parallelGateway"]))])])],1)],1)},L=[],X={inject:["i18n"],props:{height:{type:Number,default:800}},data:function(){return{activeNames:["1","3"],userTaskData:"{clazz:'userTask',size:'80*44',label:'"+this.i18n["userTask"]+"'}",javaTaskData:"{clazz:'javaTask',size:'80*44',label:'"+this.i18n["javaTask"]+"'}",mailTaskData:"{clazz:'mailTask',size:'80*44',label:'"+this.i18n["mailTask"]+"'}",handleNodeData:"{clazz:'receiveTask',size:'80*44',label:'"+this.i18n["handleNode"]+"'}"}}},V=X,Y=(a("c142"),Object(j["a"])(V,I,L,!1,null,null,null)),R=Y.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detailPanel",style:{height:e.height+"px"}},["userTask"===e.model.clazz?a("UserTaskDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,users:e.users,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"scriptTask"===e.model.clazz?a("ScriptTaskDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks}}):"receiveTask"===e.model.clazz?a("HandleNodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,users:e.users,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"gateway"===e.model.clazz||"exclusiveGateway"===e.model.clazz||"parallelGateway"===e.model.clazz||"inclusiveGateway"===e.model.clazz?a("GatewayDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}):"start"===e.model.clazz?a("StartEventDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"end"===e.model.clazz?a("EndEventDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"flow"===e.model.clazz?a("FlowDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}):e._e()],1)},q=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["userTask"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("之后任务：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["userTask.assignType.placeholder"],value:e.model.assignType,disabled:e.readOnly},on:{change:function(t){e.onChange("assignValue",[]),e.onChange("assignType",t)}}},[a("el-option",{key:"person",attrs:{value:"person",label:e.i18n["userTask.assignType.person"]}}),e._v(" "),a("el-option",{key:"variable",attrs:{value:"variable",label:e.i18n["userTask.assignType.variable"]}})],1)],1),e._v(" "),"person"===e.model.assignType?a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.person.title"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["userTask.assignType.person.placeholder"],disabled:e.readOnly,value:e.model.assignValue,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.users,(function(e){return a("el-option",{key:e.userId,attrs:{label:""===e.nickName?e.username:e.nickName,value:e.userId}})})),1)],1):"variable"===e.model.assignType?a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.variable.title"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["userTask.assignType.variable.placeholder"],disabled:e.readOnly,multiple:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.variableOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),a("div",{staticClass:"panelRow"},[a("el-checkbox",{attrs:{disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.activeOrder||e.readOnly,value:e.model.isCounterSign},on:{change:function(t){return e.onChange("isCounterSign",t)}}},[e._v(e._s(e.i18n["userTask.counterSign"]))]),e._v(" "),a("el-checkbox",{attrs:{disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.isCounterSign||e.readOnly,value:e.model.activeOrder},on:{change:function(t){return e.onChange("activeOrder",t)}}},[e._v(e._s(e.i18n["userTask.activeOrder"]))])],1),e._v(" "),a("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"readonly-preview":!1}})],1)])},W=[],$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["label"])+"：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{disabled:e.readOnly,value:e.model.label},on:{input:function(t){e.onChange("label",t)}}})],1),e._v(" "),a("div",{staticClass:"panelRow"},[e._m(0),e._v(" "),a("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{disabled:e.readOnly,value:e.model.sort},on:{input:function(t){e.onChange("sort",t)}}})],1),e._v(" "),a("div",{staticClass:"panelRow"},[a("el-checkbox",{attrs:{disabled:e.readOnly,value:!!e.model.isHideNode},on:{change:function(t){return e.onChange("isHideNode",t)}}},[e._v("隐藏节点")]),e._v(" "),a("el-checkbox",{attrs:{disabled:e.readOnly,value:!!e.model.hideIcon},on:{change:function(t){return e.onChange("hideIcon",t)}}},[e._v(e._s(e.i18n["hideIcon"]))])],1)])},H=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 顺序：")])}],U={inject:["i18n"],props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},K=U,Q=Object(j["a"])(K,$,H,!1,null,null,null),J=Q.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.writePreview?a("div",{staticClass:"panelRow"},[a("div",[e._v("可写模版：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.writeTpls,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("writeTpls",t)}}},[e._l(e.templatesBase,(function(t,n){return[-1!==e.templates.indexOf(t.id)?a("el-option",{key:n,attrs:{label:t.name,value:t.id}}):e._e()]}))],2)],1):e._e(),e._v(" "),e.readonlyPreview?a("div",{staticClass:"panelRow"},[a("div",[e._v("只读模版：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.readonlyTpls,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("readonlyTpls",t)}}},[e._l(e.templatesBase,(function(t,n){return[-1!==e.templates.indexOf(t.id)?a("el-option",{key:n,attrs:{label:t.name,value:t.id}}):e._e()]}))],2)],1):e._e(),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("隐藏模版：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.hideTpls,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("hideTpls",t)}}},[e._l(e.templatesBase,(function(t,n){return[-1!==e.templates.indexOf(t.id)?a("el-option",{key:n,attrs:{label:t.name,value:t.id}}):e._e()]}))],2)],1)])},te=[],ae={inject:["i18n"],props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}},writePreview:{type:Boolean,default:!0},readonlyPreview:{type:Boolean,default:!0}}},ne=ae,ie=Object(j["a"])(ne,ee,te,!1,null,null,null),oe=ie.exports,se={inject:["i18n"],components:{DefaultDetail:J,NodeDetail:oe},props:{model:{type:Object,default:function(){return{}}},users:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{variableOptions:[{value:1,label:"创建者"},{value:2,label:"创建者负责人"}]}},methods:{getPersons:function(e){(void 0===e||null===e||e.length<=1)&&(this.onChange("activeOrder",!1),this.onChange("isCounterSign",!1))}}},re=se,le=Object(j["a"])(re,Z,W,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["scriptTask"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("类型：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务类型",disabled:e.readOnly,value:e.model.taskType},on:{change:function(t){return e.onChange("taskType",t)}}},[a("el-option",{attrs:{label:"任务",value:"task"}}),e._v(" "),a("el-option",{attrs:{label:"脚本",value:"script"}})],1)],1),e._v(" "),"script"===e.model.taskType?a("div",{staticClass:"panelRow"},[a("div",[e._v(e._s(e.i18n["scriptTask.script"])+"：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"输入脚本",type:"textarea",rows:4,disabled:e.readOnly,value:e.model.script},on:{input:function(t){e.onChange("script",t)}}})],1):e._e(),e._v(" "),"task"===e.model.taskType?a("div",{staticClass:"panelRow"},[a("div",[e._v("任务：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.full_name}})})),1)],1):e._e()],1)])},ue=[],he={inject:["i18n"],components:{DefaultDetail:J},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},tasks:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1}}},pe=he,ge=Object(j["a"])(pe,de,ue,!1,null,null,null),me=ge.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["handleNode"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("之后任务：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["handleNode.assignType.placeholder"],value:e.model.assignType,disabled:e.readOnly},on:{change:function(t){e.onChange("assignValue",[]),e.onChange("assignType",t)}}},[a("el-option",{key:"person",attrs:{value:"person",label:e.i18n["handleNode.assignType.person"]}}),e._v(" "),a("el-option",{key:"variable",attrs:{value:"variable",label:e.i18n["handleNode.assignType.variable"]}})],1)],1),e._v(" "),"person"===e.model.assignType?a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType.person.title"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["handleNode.assignType.person.placeholder"],disabled:e.readOnly,value:e.model.assignValue,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.users,(function(e){return a("el-option",{key:e.userId,attrs:{label:""===e.nickName?e.username:e.nickName,value:e.userId}})})),1)],1):"department"===e.model.assignType?a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType.department.title"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["handleNode.assignType.department.placeholder"],value:e.model.assignValue,disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.departments,(function(e){return a("el-option",{key:e.id,attrs:{label:""===e.name?e.nickname:e.name,value:e.id}})})),1)],1):"variable"===e.model.assignType?a("div",{staticClass:"panelRow"},[a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType.variable.title"])+"：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:e.i18n["handleNode.assignType.variable.placeholder"],disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.variableOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),a("div",{staticClass:"panelRow"},[a("el-checkbox",{attrs:{disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.activeOrder||e.readOnly,value:!!e.model.isCounterSign},on:{change:function(t){return e.onChange("isCounterSign",t)}}},[e._v(e._s(e.i18n["handleNode.counterSign"]))]),e._v(" "),a("el-checkbox",{attrs:{disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.isCounterSign||e.readOnly,value:!!e.model.activeOrder},on:{change:function(t){return e.onChange("activeOrder",t)}}},[e._v(e._s(e.i18n["handleNode.activeOrder"]))])],1),e._v(" "),a("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"readonly-preview":!1}})],1)])},ve=[],ye={inject:["i18n"],components:{DefaultDetail:J,NodeDetail:oe},props:{model:{type:Object,default:function(){return{}}},users:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{variableOptions:[{value:1,label:"创建者"},{value:2,label:"创建者负责人"}]}},methods:{getPersons:function(e){(void 0===e||null===e||e.length<=1)&&(this.onChange("activeOrder",!1),this.onChange("isCounterSign",!1))}}},be=ye,xe=Object(j["a"])(be,fe,ve,!1,null,null,null),ke=xe.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s("exclusiveGateway"===e.model.clazz||"gateway"===e.model.clazz?e.i18n["exclusiveGateway"]:"parallelGateway"===e.model.clazz?e.i18n["parallelGateway"]:e.i18n["inclusiveGateway"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}})],1)])},_e=[],Ce={inject:["i18n"],components:{DefaultDetail:J},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},Se=Ce,Te=Object(j["a"])(Se,we,_e,!1,null,null,null),De=Te.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["startEvent"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("之后任务：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),a("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"write-preview":!1}})],1)])},Ae=[],Oe={inject:["i18n"],components:{DefaultDetail:J,NodeDetail:oe},props:{model:{type:Object,default:function(){return{}}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}}},ze=Oe,Be=Object(j["a"])(ze,Ee,Ae,!1,null,null,null),Fe=Be.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["endEvent"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v("之后任务：")]),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),a("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"write-preview":!1,"readonly-preview":!1}})],1)])},je=[],Pe={inject:["i18n"],components:{DefaultDetail:J,NodeDetail:oe},props:{model:{type:Object,default:function(){return{}}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}}},Me=Pe,Ie=Object(j["a"])(Me,Ne,je,!1,null,null,null),Le=Ie.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-clazz":e.model.clazz}},[a("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["sequenceFlow"]))]),e._v(" "),a("div",{staticClass:"panelBody"},[a("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),a("div",{staticClass:"panelRow"},[e._m(0),e._v(" "),a("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择流转属性",disabled:e.readOnly,value:e.model.flowProperties},on:{change:function(t){return e.onChange("flowProperties",t)}}},[a("el-option",{attrs:{label:"同意",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"拒绝",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"panelRow"},[a("div",[e._v(e._s(e.i18n["sequenceFlow.expression"])+"：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{type:"textarea",rows:4,disabled:e.readOnly,value:e.model.conditionExpression},on:{input:function(t){e.onChange("conditionExpression",t)}}})],1)],1)])},Ve=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 属性：")])}],Ye={inject:["i18n"],components:{DefaultDetail:J},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},Re=Ye,Ge=Object(j["a"])(Re,Xe,Ve,!1,null,null,null),qe=Ge.exports,Ze={inject:["i18n"],components:{UserTaskDetail:ce,ScriptTaskDetail:me,HandleNodeDetail:ke,GatewayDetail:De,StartEventDetail:Fe,EndEventDetail:Le,FlowDetail:qe},props:{height:{type:Number,default:800},model:{type:Object,default:function(){return{}}},signalDefs:{type:Array,default:function(){return[]}},messageDefs:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},users:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}}},We=Ze,$e=(a("2463"),Object(j["a"])(We,G,q,!1,null,null,null)),He=$e.exports,Ue={label:"Label",hideIcon:"Hide Icon",userTask:"User Task","userTask.assignType":"Assign Type","userTask.assignType.placeholder":"Select a assign type","userTask.assignType.person":"Person","userTask.assignType.person.title":"Assign Person","userTask.assignType.person.placeholder":"Select assign person","userTask.assignType.persongroup":"Person Group","userTask.assignType.persongroup.title":"Assign Person Group","userTask.assignType.persongroup.placeholder":"Select assign person group","userTask.assignType.custom":"Custom Java Class","userTask.assignType.custom.title":"Java Class Name","userTask.dueDate":"Due Date","userTask.dueDate.placeholder":"Select date","userTask.counterSign":"CounterSign",scriptTask:"Script Task","scriptTask.script":"Script",javaTask:"Java Task","javaTask.javaClass":"Java Class Name",mailTask:"Mail Task","mailTask.to":"To","mailTask.subject":"Subject","mailTask.content":"Content",receiveTask:"Receive Task","receiveTask.waitState":"Wait State","receiveTask.stateValue":"State Value",timerEvent:"Timer Event","timerEvent.cycle":"Cycle","timerEvent.cycle.placeholder":"Select time","timerEvent.duration":"Duration",messageEvent:"Message Event","messageEvent.message":"Message",signalEvent:"Signal Event","signalEvent.signal":"Signal",sequenceFlow:"Sequence Flow","sequenceFlow.expression":"Expression","sequenceFlow.seq":"Sequence","sequenceFlow.reverse":"Reverse",startEvent:"Start Event",endEvent:"End Event",start:"Start Events",end:"End Events",gateway:"Gateway",exclusiveGateway:"Exclusive Gateway",parallelGateway:"Parallel Gateway",inclusiveGateway:"Inclusive Gateway",task:"Task",catch:"Catching Event","tooltip.undo":"Undo","tooltip.redo":"Redo","tooltip.copy":"Copy","tooltip.paste":"Paste","tooltip.delete":"Delete","tooltip.zoomIn":"Zoom In","tooltip.zoomOut":"Zoom Out","tooltip.zoomReset":"Zoom Reset","tooltip.autoFit":"Auto Fit","tooltip.toFront":"To Front Layer","tooltip.toBack":"To Back Layer","tooltip.edit":"Edit",process:"Workflow","process.id":"Workflow ID","process.name":"Workflow Name","process.dataObjs":"Data Objects","process.signalDefs":"Signal Defs","process.messageDefs":"Message Defs","process.dataObjs.id":"Id","process.dataObjs.name":"Name","process.dataObjs.type":"Type","process.dataObjs.defaultValue":"DefaultValue","process.signalDef.scope":"Scope"},Ke={label:"标题",hideIcon:"隐藏图标",userTask:"审批节点","userTask.assignType":"指派类型","userTask.assignType.placeholder":"选择一个类型","userTask.assignType.person":"人员","userTask.assignType.person.title":"审批人","userTask.assignType.person.placeholder":"选择审批人","userTask.assignType.persongroup":"人员组","userTask.assignType.persongroup.title":"审批组","userTask.assignType.persongroup.placeholder":"选择审批组","userTask.assignType.custom":"自定义类","userTask.assignType.custom.title":"类名","userTask.assignType.department":"部门","userTask.assignType.department.title":"审批部门","userTask.assignType.department.placeholder":"选择审批部门","userTask.assignType.variable":"变量","userTask.assignType.variable.title":"审批变量","userTask.assignType.variable.placeholder":"选择审批变量","userTask.dueDate":"到期时间","userTask.dueDate.placeholder":"请选择日期","userTask.counterSign":"会签","userTask.activeOrder":"主动接单","userTask.endorsement":"加签",conventional:"常规节点",handleNode:"处理节点","handleNode.assignType":"指派类型","handleNode.assignType.placeholder":"选择一个类型","handleNode.assignType.person":"人员","handleNode.assignType.person.title":"审批人","handleNode.assignType.person.placeholder":"选择审批人","handleNode.assignType.persongroup":"人员组","handleNode.assignType.persongroup.title":"审批组","handleNode.assignType.persongroup.placeholder":"选择审批组","handleNode.assignType.custom":"自定义类","handleNode.assignType.custom.title":"类名","handleNode.assignType.department":"部门","handleNode.assignType.department.title":"审批部门","handleNode.assignType.department.placeholder":"选择审批部门","handleNode.assignType.variable":"变量","handleNode.assignType.variable.title":"审批变量","handleNode.assignType.variable.placeholder":"选择审批变量","handleNode.dueDate":"到期时间","handleNode.dueDate.placeholder":"请选择日期","handleNode.counterSign":"会签","handleNode.endorsement":"加签","handleNode.activeOrder":"主动接单",scriptTask:"任务节点","scriptTask.script":"脚本",javaTask:"自定义类节点","javaTask.javaClass":"类名",mailTask:"邮件节点","mailTask.to":"收件人","mailTask.subject":"标题","mailTask.content":"内容",receiveTask:"接收节点","receiveTask.waitState":"等待属性","receiveTask.stateValue":"等待值",timerEvent:"定时节点","timerEvent.cycle":"循环时间","timerEvent.cycle.placeholder":"请选择时间","timerEvent.duration":"持续时间",messageEvent:"消息节点","messageEvent.message":"消息名",signalEvent:"信号节点","signalEvent.signal":"信号名",sequenceFlow:"连接线","sequenceFlow.expression":"条件表达式","sequenceFlow.seq":"序号","sequenceFlow.reverse":"反向",startEvent:"开始节点",endEvent:"结束节点",start:"开始事件",end:"结束事件",gateway:"网关",exclusiveGateway:"排他网关",parallelGateway:"并行网关",inclusiveGateway:"包容网关",task:"活动",catch:"捕获事件","tooltip.undo":"撤销","tooltip.redo":"重复","tooltip.copy":"复制","tooltip.paste":"粘贴","tooltip.delete":"删除","tooltip.zoomIn":"缩小","tooltip.zoomOut":"放大","tooltip.zoomReset":"实际大小","tooltip.autoFit":"适应屏幕","tooltip.toFront":"移到上一层","tooltip.toBack":"移到下一层","tooltip.edit":"编辑",process:"流程","process.id":"流程标识","process.name":"流程名称","process.dataObjs":"数据对象","process.signalDefs":"信号定义","process.messageDefs":"消息定义","process.dataObjs.id":"Id","process.dataObjs.name":"名称","process.dataObjs.type":"类型","process.dataObjs.defaultValue":"默认值","process.signalDef.scope":"作用域"},Qe={en:Ue,zh:Ke},Je=a("75fc");function et(e){return Object(Je["a"])(Array(e)).map((function(e){return" "})).join("")}function tt(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.id||"flow",i=t.name||"flow",o="";t.dataObjs.forEach((function(e){o+="".concat(et(4),'<dataObject id="').concat(e.id,'" name="').concat(e.name,'" itemSubjectRef="xsd:').concat(e.type,'"></dataObject>\n')}));var s="";t.signalDefs.forEach((function(e){s+="".concat(et(2),'<signal id="').concat(e.id,'" name="').concat(e.name,'" flowable:scope="').concat(e.scope,'"></signal>\n')}));var r="";t.messageDefs.forEach((function(e){r+="".concat(et(2),'<message id="').concat(e.id,'" name="').concat(e.name,'"></message>\n')}));var l="",c="",d="".concat(et(2),'<process id="').concat(n,'" name="').concat(i,'">\n');d+=o,e.nodes.forEach((function(e){switch(l+="".concat(et(6),'<bpmndi:BPMNShape bpmnElement="').concat(e.id,'" id="BPMNShape_').concat(e.id,'">\n')+"".concat(et(8),'<omgdc:Bounds width="').concat(e.size[0],'" height="').concat(e.size[1],'" x="').concat(e.x,'" y="').concat(e.y,'"></omgdc:Bounds>\n')+"".concat(et(6),"</bpmndi:BPMNShape>\n"),e.clazz){case"start":d+="".concat(et(4),'<startEvent id="').concat(e.id,'"></startEvent>\n');break;case"end":d+="".concat(et(4),'<endEvent id="').concat(e.id,'"></endEvent>\n');break;case"userTask":var t="";e.assignValue&&e.assignValue.length>0&&("person"===e.assignType?t+='flowable:candidateUsers="'.concat(e.assignValue.join(","),'"'):"persongroup"===e.assignType&&(t+='flowable:candidateGroups="'.concat(e.assignValue.join(","),'"'))),d+="".concat(et(4),'<userTask id="').concat(e.id,'" name="').concat(e.label,'" ').concat(t,"></userTask>\n");break;case"javaTask":var a="";e.javaClass&&(a='flowable:class="'.concat(e.javaClass,'"')),d+="".concat(et(4),'<serviceTask id="').concat(e.id,'" name="').concat(e.label,'" ').concat(a,"></serviceTask>\n");break;case"scriptTask":var n="";e.script&&(n="".concat(et(6),"<script><![CDATA[").concat(e.script,"]]><\/script>\n")),d+="".concat(et(4),'<scriptTask id="').concat(e.id,'" name="').concat(e.label,'">\n').concat(n).concat(et(4),"</scriptTask>\n");break;case"receiveTask":d+="".concat(et(4),'<receiveTask id="').concat(e.id,'" name="').concat(e.label,'"></receiveTask>\n');break;case"mailTask":var i="".concat(et(8),'<flowable:field name="to">\n');i+="".concat(et(10),"<flowable:string><![CDATA[").concat(e.to,"]]></flowable:string>\n"),i+="".concat(et(8),"</flowable:field>\n");var o="".concat(et(8),'<flowable:field name="subject">\n');o+="".concat(et(10),"<flowable:string><![CDATA[").concat(e.subject,"]]></flowable:string>\n"),o+="".concat(et(8),"</flowable:field>\n");var s="".concat(et(8),'<flowable:field name="text">\n');s+="".concat(et(10),"<flowable:string><![CDATA[").concat(e.content,"]]></flowable:string>\n"),s+="".concat(et(8),"</flowable:field>\n");var r="".concat(et(6),"<extensionElements>\n").concat(i).concat(o).concat(s).concat(et(6),"</extensionElements>\n");d+="".concat(et(4),'<serviceTask id="').concat(e.id,'" name="').concat(e.label,'" flowable:type="mail">\n').concat(r).concat(et(4),"</serviceTask>\n");break;case"timerStart":var c="".concat(et(6),"<timerEventDefinition>\n").concat(et(8),"<timeCycle>").concat(e.cycle,"</timeCycle>\n").concat(et(6),"</timerEventDefinition>\n");d+="".concat(et(4),'<startEvent id="').concat(e.id,'" isInterrupting="false">\n').concat(c).concat(et(4),"</startEvent>\n");break;case"timerCatch":var u="".concat(et(6),"<timerEventDefinition>\n").concat(et(8),"<timeCycle>").concat(e.cycle,"</timeCycle>\n").concat(et(6),"</timerEventDefinition>\n");d+="".concat(et(4),'<intermediateCatchEvent id="').concat(e.id,'">\n').concat(u).concat(et(4),"</intermediateCatchEvent>\n");break;case"signalStart":var h="".concat(et(6),'<signalEventDefinition signalRef="').concat(e.signal,'"></signalEventDefinition>\n');d+="".concat(et(4),'<startEvent id="').concat(e.id,'" isInterrupting="true">\n').concat(h).concat(et(4),"</startEvent>\n");break;case"signalCatch":var p="".concat(et(6),'<signalEventDefinition signalRef="').concat(e.signal,'"></signalEventDefinition>\n');d+="".concat(et(4),'<intermediateCatchEvent id="').concat(e.id,'">\n').concat(p).concat(et(4),"</intermediateCatchEvent>\n");break;case"messageStart":var g="".concat(et(6),'<messageEventDefinition messageRef="').concat(e.message,'"></messageEventDefinition>\n');d+="".concat(et(4),'<startEvent id="').concat(e.id,'" isInterrupting="true">\n').concat(g).concat(et(4),"</startEvent>\n");break;case"messageCatch":var m="".concat(et(6),'<messageEventDefinition messageRef="').concat(e.message,'"></messageEventDefinition>\n');d+="".concat(et(4),'<intermediateCatchEvent id="').concat(e.id,'">\n').concat(m).concat(et(4),"</intermediateCatchEvent>\n");break;case"gateway":d+="".concat(et(4),'<exclusiveGateway id="').concat(e.id,'" name="').concat(e.label,'"></exclusiveGateway>\n');break;case"exclusiveGateway":d+="".concat(et(4),'<exclusiveGateway id="').concat(e.id,'" name="').concat(e.label,'"></exclusiveGateway>\n');break;case"parallelGateway":d+="".concat(et(4),'<parallelGateway id="').concat(e.id,'" name="').concat(e.label,'"></parallelGateway>\n');break;case"inclusiveGateway":d+="".concat(et(4),'<inclusiveGateway id="').concat(e.id,'" name="').concat(e.label,'"></inclusiveGateway>\n');break;default:break}})),e.edges.forEach((function(e){c+="".concat(et(6),'<bpmndi:BPMNEdge bpmnElement="').concat(e.source,"_").concat(e.sourceAnchor,"-").concat(e.target,"_").concat(e.targetAnchor,'" ')+'id="BPMNEdge_'.concat(e.source,"_").concat(e.sourceAnchor,"-").concat(e.target,"_").concat(e.targetAnchor,'">\n')+"".concat(et(8),'<omgdi:waypoint x="').concat(e.startPoint.x,'" y="').concat(e.startPoint.y,'"></omgdi:waypoint>\n')+"".concat(et(8),'<omgdi:waypoint x="').concat(e.endPoint.x,'" y="').concat(e.endPoint.y,'"></omgdi:waypoint>\n')+"".concat(et(6),"</bpmndi:BPMNEdge>\n");var t="";e.coditionExpression&&(t="".concat(et(6),'<conditionExpression xsi:type="tFormalExpression"><![CDATA[').concat(e.coditionExpression,"]]></conditionExpression>\n")),d+="".concat(et(4),'<sequenceFlow id="').concat(e.source,"_").concat(e.sourceAnchor,"-").concat(e.target,"_").concat(e.targetAnchor,'" sourceRef="').concat(e.source,'" targetRef="').concat(e.target,'">').concat(t,"</sequenceFlow>\n")})),d+="".concat(et(2),"</process>\n");var u="".concat(et(2),'<bpmndi:BPMNDiagram id="BPMNDiagram_').concat(n,'">\n')+"".concat(et(4),'<bpmndi:BPMNPlane bpmnElement="').concat(n,'" id="BPMNPlane_').concat(n,'">\n').concat(l).concat(c).concat(et(4),"</bpmndi:BPMNPlane>\n")+"".concat(et(2),"</bpmndi:BPMNDiagram>\n"),h='<?xml version="1.0" encoding="UTF-8"?>\n';if(h+='<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">\n',h+=s,h+=r,h+=d,h+=u,h+="</definitions>",a){var p=new Blob([h],{type:"application/xml;charset=utf-8;"}),g="".concat(i,".bpmn20.xml"),m=document.createElement("a");if(void 0!==m.download){var f=URL.createObjectURL(p);m.setAttribute("href",f),m.setAttribute("download",g),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}}return h}var at={nodeActivedOutterStyle:{lineWidth:0},groupSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},nodeSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},edgeActivedStyle:{stroke:"#1890FF",strokeOpacity:.92},nodeActivedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupActivedStyle:{stroke:"#1890FF"},edgeSelectedStyle:{lineWidth:2,strokeOpacity:.92,stroke:"#A3B1BF"},nodeSelectedStyle:{fill:"#F3F9FF",stroke:"#1890FF",fillOpacity:.4},groupSelectedStyle:{stroke:"#1890FF",fillOpacity:.92},nodeStyle:{stroke:"#CED4D9",fill:"#FFFFFF",shadowOffsetX:0,shadowOffsetY:4,shadowBlur:10,shadowColor:"rgba(13, 26, 38, 0.08)",lineWidth:1,radius:4,strokeOpacity:.7},edgeStyle:{stroke:"#A3B1BF",strokeOpacity:.92,lineWidth:1,lineAppendWidth:8,endArrow:!0},groupBackgroundPadding:[40,10,10,10],groupLabelOffsetX:10,groupLabelOffsetY:10,edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectPadding:4,edgeLabelRectStyle:{fill:"white"},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",radius:4},groupLabelStyle:{fill:"#666",textAlign:"left",textBaseline:"top"},multiSelectRectStyle:{fill:"#1890FF",fillOpacity:.08,stroke:"#1890FF",opacity:.1},dragNodeHoverToGroupStyle:{stroke:"#1890FF",lineWidth:2},dragNodeLeaveFromGroupStyle:{stroke:"#BAE7FF",lineWidth:2},anchorPointStyle:{radius:3.5,fill:"#fff",stroke:"#1890FF",lineAppendWidth:12},anchorHotsoptStyle:{radius:12,fill:"#1890FF",fillOpacity:.25},anchorHotsoptActivedStyle:{radius:14},anchorPointHoverStyle:{radius:4,fill:"#1890FF",fillOpacity:1,stroke:"#1890FF"},nodeControlPointStyle:{radius:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{radius:6,symbol:"square",lineAppendWidth:6,fillOpacity:0,strokeOpacity:0},nodeSelectedBoxStyle:{stroke:"#C2C2C2"},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab",hoverNode:"move",hoverEffectiveAnchor:"crosshair",hoverEdge:"default",hoverGroup:"move",hoverUnEffectiveAnchor:"default",hoverEdgeControllPoint:"crosshair",multiSelect:"crosshair"},nodeDelegationStyle:{stroke:"#1890FF",fill:"#1890FF",fillOpacity:.08,lineDash:[4,4],radius:4,lineWidth:1},edgeDelegationStyle:{stroke:"#1890FF",lineDash:[4,4],lineWidth:1}},nt=a("15e8"),it=function(e){e.Shape.registerFactory("anchor",{defaultShapeType:"marker"}),e.Shape.registerAnchor("single-anchor",e.Util.mix({},nt,{itemType:"anchor",drawShape:function(e,t){var a=this.shapeType,n=this.getShapeStyle(e),i=t.addShape(a,{attrs:n});return i},setState:function(e,t,a){"active-anchor"===e&&(t?this.update({style:Object(s["a"])({},at.anchorPointHoverStyle)},a):this.update({style:Object(s["a"])({},at.anchorPointStyle)},a))}})),e.Shape.registerAnchor("marker",{shapeType:"marker"},"single-anchor")},ot=(a("6c7b"),a("8d21")),st=function(e,t,a){var n,i=a.addGroup(),o=new ot({type:"anchor",group:i,capture:!1,index:e,isActived:!1,model:{style:Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),at.anchorPointStyle),{},{cursor:at.cursor.hoverEffectiveAnchor})}});return o.isAnchor=!0,o.toFront(),o.showHotpot=function(){n=i.addShape("marker",{attrs:Object(s["a"])(Object(s["a"])({},t),at.anchorHotsoptStyle)}),n.toFront(),o.getKeyShape().toFront()},o.setActived=function(){o.update({style:Object(s["a"])({},at.anchorPointHoverStyle)})},o.clearActived=function(){o.update({style:Object(s["a"])({},at.anchorPointStyle)})},o.setHotspotActived=function(e){n&&(e?n.attr(at.anchorHotsoptActivedStyle):n.attr(at.anchorHotsoptStyle))},i},rt=st,lt=[[0,1],[0,2],[1,2],[0,1,1,2],[0,2,1,2],[1,2,1,2],[2,2,1,2],[3,2,1,2],[4,2,1,2]],ct=9,dt=[4,2,1,2],ut=function(e){e.registerNode("base-node",{options:{icon:null,iconStyle:{width:14,height:14,left:0,top:0},style:{fill:"#f9f9f9",stroke:"#bbb",cursor:"default"},stateStyles:{selected:{fill:"#eee"},hover:{cursor:at.cursor.hoverNode}}},drawAnchor:function(e){var t=e.get("children")[0].getBBox();this.getAnchorPoints().forEach((function(a,n){var i=rt(n,{x:t.minX+t.width*a[0],y:t.minY+t.height*a[1]},e);e.anchorShapes.push(i),e.getAllAnchors=function(){return e.anchorShapes.map((function(e){e.filter((function(e){return e.isAnchor}))}))},e.getAnchor=function(t){return e.anchorShapes.filter((function(e){return e.get("index")===t}))}}))},drawShape:function(e,t){var a=this,n=this.shapeType,i=this.getShapeStyle(e),o=t.addShape(n,{attrs:Object(s["a"])({},i)});if(this.options.icon){var r={x:i.x+this.options.iconStyle.left,y:i.y+this.options.iconStyle.top,width:this.options.iconStyle.width,height:this.options.iconStyle.height};"circle"===n?r={x:i.x-i.r+this.options.iconStyle.left,y:i.y-i.r+this.options.iconStyle.top,width:this.options.iconStyle.width,height:this.options.iconStyle.height}:"path"===n&&(r={x:this.options.iconStyle.left,y:this.options.iconStyle.top,width:this.options.iconStyle.width,height:this.options.iconStyle.height}),t.icon=t.addShape("image",{attrs:Object(s["a"])({img:this.options.icon},r)}),e.hideIcon&&t.icon.hide()}return t.anchorShapes=[],t.showAnchor=function(e){a.drawAnchor(e)},t.clearAnchor=function(e){e.anchorShapes&&e.anchorShapes.forEach((function(e){return e.remove()})),e.anchorShapes=[]},t.clearHotpotActived=function(e){e.anchorShapes&&e.anchorShapes.forEach((function(e){e.isAnchor&&e.setHotspotActived(!1)}))},o},setState:function(e,t,a){var n=a.getContainer();if("show-anchor"===e)t?n.showAnchor(n):n.clearAnchor(n);else if("selected"===e){var i=n.getChildByIndex(0);t?i.attr("fill",this.options.stateStyles.selected.fill):i.attr("fill",this.options.style.fill)}else if("hover"===e){var o=n.getChildByIndex(0),s=n.getChildByIndex(1);t?(o.attr("cursor",this.options.stateStyles.hover.cursor),s&&s.attr("cursor",this.options.stateStyles.hover.cursor)):(o.attr("cursor",this.options.style.cursor),s&&s.attr("cursor",this.options.style.cursor))}},getAnchorPoints:function(){return[[.5,0],[1,.5],[.5,1],[0,.5]]},runAnimate:function(e,t){if(e.active){var a=[],n=0,i=t.getFirst();i.animate({onFrame:function(e){for(var t=0;t<9;t+=ct)a=a.concat(dt);var i={lineDash:lt[n].concat(a)};return n=(n+1)%ct,i},repeat:!0},5e3)}},afterDraw:function(e,t){this.runAnimate(e,t)},afterUpdate:function(e,t){var a=t.get("group").icon;e.hideIcon&&a&&a.get("visible")?a.hide():e.hideIcon||!a||a.get("visible")||a.show()}},"single-shape")},ht=a("1b95"),pt={icon:null,iconStyle:{width:12,height:12,left:2,top:2},style:Object(s["a"])(Object(s["a"])({},at.nodeStyle),{},{fill:"#E7F7FE",stroke:"#1890FF",cursor:"default"}),stateStyles:{selected:{fill:"#95D6FB"},hover:{cursor:at.cursor.hoverNode}}},gt={icon:null,iconStyle:{width:20,height:20,left:2,top:2},style:Object(s["a"])(Object(s["a"])({},at.nodeStyle),{},{fill:"#E8FEFA",stroke:"#13C2C2",cursor:"default"}),stateStyles:{selected:{fill:"#8CE8DE"},hover:{cursor:at.cursor.hoverNode}}},mt={icon:null,iconStyle:{width:18,height:18,left:6,top:6},style:Object(s["a"])(Object(s["a"])({},at.nodeStyle),{},{fill:"#FEF7E8",stroke:"#FA8C16",cursor:"default"}),stateStyles:{selected:{fill:"#FCD49A"},hover:{cursor:at.cursor.hoverNode}}},ft={icon:null,iconStyle:{width:18,height:18,left:6,top:6},style:Object(s["a"])(Object(s["a"])({},at.nodeStyle),{},{fill:"#EFF7E8",stroke:"#F5222D",cursor:"default"}),stateStyles:{selected:{fill:"#CFD49A"},hover:{cursor:at.cursor.hoverNode}}},vt={icon:null,iconStyle:{width:20,height:20,left:-10,top:-8},style:Object(s["a"])(Object(s["a"])({},at.nodeStyle),{},{fill:"#FEF7E8",stroke:"#FA8C16",cursor:"default"}),stateStyles:{selected:{fill:"#FCD49A"},hover:{cursor:at.cursor.hoverNode}}},yt=function(e){e.registerNode("task-node",{shapeType:"rect",options:Object(s["a"])({},pt),getShapeStyle:function(e){e.size=[80,44];var t=e.size[0],a=e.size[1],n=Object(s["a"])({x:0-t/2,y:0-a/2,width:t,height:a},this.options.style);return n}},"base-node"),e.registerNode("gateway-node",{shapeType:"path",labelPosition:"bottom",options:Object(s["a"])({},gt),getShapeStyle:function(e){e.size=[40,40];var t=e.size[0],a=e.size[1],n=4,i=Object(s["a"])({path:[["M",0-n,0-a/2+n],["Q",0,0-a/2,n,0-a/2+n],["L",t/2-n,0-n],["Q",t/2,0,t/2-n,n],["L",n,a/2-n],["Q",0,a/2,0-n,a/2-n],["L",-t/2+n,n],["Q",-t/2,0,-t/2+n,0-n],["Z"]]},this.options.style);return i}},"base-node"),e.registerNode("exclusive-gateway-node",{afterDraw:function(e,t){t.icon=t.addShape("path",{attrs:{path:[["M",-8,-8],["L",8,8],["Z"],["M",8,-8],["L",-8,8],["Z"]],lineWidth:2,stroke:this.options.style.stroke}}),this.runAnimate(e,t)}},"gateway-node"),e.registerNode("parallel-gateway-node",{afterDraw:function(e,t){t.icon=t.addShape("path",{attrs:{path:[["M",0,-10],["L",0,10],["Z"],["M",-10,0],["L",10,0],["Z"]],lineWidth:2,stroke:this.options.style.stroke}}),this.runAnimate(e,t)}},"gateway-node"),e.registerNode("inclusive-gateway-node",{afterDraw:function(e,t){t.icon=t.addShape("circle",{attrs:{x:0,y:0,r:10,lineWidth:2,stroke:this.options.style.stroke}}),this.runAnimate(e,t)}},"gateway-node"),e.registerNode("start-node",{shapeType:"circle",labelPosition:"bottom",options:Object(s["a"])({},mt),getShapeStyle:function(e){e.size=[30,30];var t=e.size[0],a=Object(s["a"])({x:0,y:0,r:t/2},this.options.style);return a},afterDraw:function(e,t){t.icon=t.addShape("path",{attrs:{path:[["M",-4,-6],["L",6,0],["L",-4,6],["Z"]],fill:this.options.style.stroke,stroke:this.options.style.stroke}})},getAnchorPoints:function(){return[[.5,0],[1,.5],[.5,1]]}},"base-node"),e.registerNode("end-node",{shapeType:"circle",labelPosition:"bottom",options:Object(s["a"])({},ft),getShapeStyle:function(e){e.size=[30,30];var t=e.size[0],a=Object(s["a"])({x:0,y:0,r:t/2},this.options.style);return a},afterDraw:function(e,t){t.icon=t.addShape("path",{attrs:{path:[["M",-4,-4],["L",4,-4],["L",4,4],["L",-4,4],["Z"]],fill:this.options.style.stroke,stroke:this.options.style.stroke}})},getAnchorPoints:function(){return[[.5,0],[.5,1],[0,.5]]}},"base-node"),e.registerNode("catch-node",{shapeType:"path",labelPosition:"bottom",options:Object(s["a"])({},vt),getShapeStyle:function(e){e.size=[50,30];var t=e.size[0],a=e.size[1],n=Object(s["a"])({path:[["M",0,-a/3],["L",t/2,-a/3],["L",0,a/3*2],["L",-t/2,-a/3],["Z"]]},this.options.style);return n},getAnchorPoints:function(){return[[.5,0],[.8,.38],[.5,1],[.2,.38]]}},"base-node"),e.registerNode("user-task-node",{options:ht({},pt,{icon:a("c52e"),style:{fill:"#E7F7FE",stroke:"#1890FF"},stateStyles:{selected:{fill:"#95D6FB"}}})},"task-node"),e.registerNode("script-task-node",{options:ht({},pt,{icon:a("2d36"),style:{fill:"#FFF7E6",stroke:"#FFA940"},stateStyles:{selected:{fill:"#FFE7BA"}}})},"task-node"),e.registerNode("java-task-node",{options:ht({},pt,{icon:a("c4beb"),style:{fill:"#FFF1F0",stroke:"#FF4D4F"},stateStyles:{selected:{fill:"#FFCCC7"}}})},"task-node"),e.registerNode("mail-task-node",{options:ht({},pt,{icon:a("f601"),style:{fill:"#F6FFED",stroke:"#73D13D"},stateStyles:{selected:{fill:"#D9F7BE"}}})},"task-node"),e.registerNode("receive-task-node",{options:ht({},pt,{icon:a("11fe"),style:{fill:"#FFF0F6",stroke:"#FF85C0"},stateStyles:{selected:{fill:"#FFD6E7"}}})},"task-node"),e.registerNode("timer-start-node",{options:ht({},mt,{icon:a("d338")}),afterDraw:function(e,t){this.runAnimate(e,t)}},"start-node"),e.registerNode("message-start-node",{options:ht({},mt,{icon:a("ba02")}),afterDraw:function(e,t){this.runAnimate(e,t)}},"start-node"),e.registerNode("signal-start-node",{options:ht({},mt,{icon:a("31ac")}),afterDraw:function(e,t){this.runAnimate(e,t)}},"start-node"),e.registerNode("timer-catch-node",{options:ht({},vt,{icon:a("d338")})},"catch-node"),e.registerNode("signal-catch-node",{options:ht({},vt,{icon:a("31ac")})},"catch-node"),e.registerNode("message-catch-node",{options:ht({},vt,{icon:a("ba02")})},"catch-node")},bt=(a("20d6"),a("7514"),function(e,t){var a=[];return e.forEach((function(e){a.find((function(a){return a[t]===e[t]}))||a.push(e)})),a}),xt=function(e){e.registerEdge("flow-polyline-round",{options:{style:Object(s["a"])({},at.edgeStyle),stateStyles:{selected:{lineWidth:at.edgeSelectedStyle.lineWidth},hover:{stroke:at.edgeActivedStyle.stroke}}},setState:function(e,t,a){var n=a.getContainer(),i=n.getChildByIndex(0);"selected"===e?t?(i.attr("lineWidth",this.options.stateStyles.selected.lineWidth),i.attr("stroke",this.options.style.stroke)):i.attr("lineWidth",this.options.style.lineWidth):"hover"===e&&(t?i.attr("stroke",this.options.stateStyles.hover.stroke):i.attr("stroke",this.options.style.stroke))},drawShape:function(e,t){this.group=t;var a=this.getShapeStyle(e),n=t.addShape("path",{className:"edge-shape",attrs:a});return n},drawLabel:function(e,t){var a=e.labelCfg||{},n=this.getLabelStyle(e,a,t),i=t.addShape("text",{attrs:n}),o=i.getBBox();return t.addShape("rect",{className:"edge-labelRect",attrs:{x:o.x-at.edgeLabelRectPadding/2,y:o.y-at.edgeLabelRectPadding/2,width:o.width+at.edgeLabelRectPadding,height:o.height+at.edgeLabelRectPadding,fill:"#fff",stroke:"#fff"}}),t.toBack(),i.toFront(),i},afterUpdate:function(e,t){var a=t.getContainer().findByClassName("edge-label"),n=t.getContainer().findByClassName("edge-labelRect");if(a){var i=a.getBBox();n.attr({x:i.x-at.edgeLabelRectPadding/2,y:i.y-at.edgeLabelRectPadding/2,width:i.width+at.edgeLabelRectPadding,height:i.height+at.edgeLabelRectPadding})}},getShapeStyle:function(e){e=this.getPathPoints(e);var t=e.startPoint,a=e.endPoint,n=this.getControlPoints(e),i=[t];n&&(i=i.concat(n)),i.push(a);var o=this.getPath(i),r=this.options.style;return r=e.reverse?Object(s["a"])(Object(s["a"])({},r),{},{lineDash:[1,3]}):Object(s["a"])(Object(s["a"])({},r),{},{lineDash:null}),Object(s["a"])(Object(s["a"])({path:o},r),{},{endArrow:{path:"M 0,0 L -10,-4 S -8 0,-10 4 Z"}})},getPath:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];if(0===a)t.push(["M",n.x,n.y]);else if(a===e.length-1)t.push(["L",n.x,n.y]);else{var i=e[a-1],o=e[a+1],s=5;(Math.abs(n.y-i.y)>s||Math.abs(n.x-i.x)>s)&&(i.x===n.x?t.push(["L",n.x,n.y>i.y?n.y-s:n.y+s]):i.y===n.y&&t.push(["L",n.x>i.x?n.x-s:n.x+s,n.y]));var r=Math.abs(n.y-o.y),l=Math.abs(n.x-o.x);r>0&&r<s?s=r:l>0&&l<s&&(s=l),i.x!==o.x&&o.x===n.x?t.push(["Q",n.x,n.y,n.x,n.y>o.y?n.y-s:n.y+s]):i.y!==o.y&&o.y===n.y&&t.push(["Q",n.x,n.y,n.x>o.x?n.x-s:n.x+s,n.y])}}return t},getControlPoints:function(e){return e.sourceNode?this.polylineFinding(e.sourceNode,e.targetNode,e.startPoint,e.endPoint,15):e.controlPoints},getExpandedBBox:function(e,t){return 0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},getExpandedPort:function(e,t){return Math.abs(t.x-e.centerX)/e.width>Math.abs(t.y-e.centerY)/e.height?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},combineBBoxes:function(e,t){var a=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(a+i)/2,centerY:(n+o)/2,minX:a,minY:n,maxX:i,maxY:o,height:o-n,width:i-a}},getBBoxFromVertexes:function(e,t){var a=Math.min(e.x,t.x),n=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y);return{centerX:(a+n)/2,centerY:(i+o)/2,maxX:n,maxY:o,minX:a,minY:i,height:o-i,width:n-a}},vertexOfBBox:function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},crossPointsByLineAndBBox:function(e,t){var a=[];return t.x<e.minX||t.x>e.maxX||(a=a.concat([{x:t.x,y:e.minY},{x:t.x,y:e.maxY}])),t.y<e.minY||t.y>e.maxY||(a=a.concat([{x:e.minX,y:t.y},{x:e.maxX,y:t.y}])),a},getConnectablePoints:function(e,t,a,n){var i=this,o=this.getBBoxFromVertexes(a,n),s=this.combineBBoxes(e,t),r=this.combineBBoxes(e,o),l=this.combineBBoxes(t,o),c=[];c=c.concat(this.vertexOfBBox(r),this.vertexOfBBox(l),this.vertexOfBBox(s));var d={x:s.centerX,y:s.centerY};return[s,r,l,o].forEach((function(e){c=c.concat(i.crossPointsByLineAndBBox(e,d))})),c.push({x:a.x,y:n.y}),c.push({x:n.x,y:a.y}),c},filterConnectablePoints:function(e,t){return e.filter((function(e){return e.x<=t.minX||e.x>=t.maxX||e.y<=t.minY||e.y>=t.maxY}))},AStar:function(e,t,a,n,i){var o,s=this,r=[t],l=[];e=bt(this.fillId(e),"id"),e.push(a);var c=function(){var t=void 0;if(r.forEach((function(e,a){e.parent||(e.f=0),t||(t=e),e.f<t.f&&(t=e)})),t.x===a.x&&t.y===a.y)return o=t,"break";r.splice(r.findIndex((function(e){return e.x===t.x&&e.y===t.y})),1),l.push(t);var c=e.filter((function(e){return(e.x===t.x||e.y===t.y)&&!(e.x===t.x&&e.y===t.y)&&!s.crossBBox([n,i],t,e)}));c.forEach((function(e){var n=r.find((function(t){return t.x===e.x&&t.y===e.y})),o=s.getCost(e,t);if(l.find((function(t){return t.x===e.x&&t.y===e.y})));else if(n)e.g>o&&(e.parent=t,e.g=o,e.f=e.g+e.h);else{e.parent=t,e.g=o;var c=s.getCost(e,a);s.crossBBox([i],e,a)&&(c+=i.width/2+i.height/2),e.h=c,e.f=e.g+e.h,r.push(e)}}))};while(r.length>0){var d=c();if("break"===d)break}if(o){var u=[];u.push({x:o.x,y:o.y});while(o.parent)o=o.parent,u.push({x:o.x,y:o.y});return u.reverse()}return[]},crossBBox:function(e,t,a){for(var n=0;n<e.length;n++){var i=e[n];if(t.x===a.x&&i.minX<t.x&&i.maxX>t.x){if(t.y<i.maxY&&a.y>=i.maxY||a.y<i.maxY&&t.y>=i.maxY)return!0}else if(t.y===a.y&&i.minY<t.y&&i.maxY>t.y&&(t.x<i.maxX&&a.x>=i.maxX||a.x<i.maxX&&t.x>=i.maxX))return!0}return!1},getCost:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},getPointBBox:function(e){return{centerX:e.x,centerY:e.y,minX:e.x,minY:e.y,maxX:e.x,maxY:e.y,height:0,width:0}},fillId:function(e){return e.forEach((function(e){e.id=e.x+"-"+e.y})),e},polylineFinding:function(e,t,a,n,i){var o=e&&e.getBBox()?e.getBBox():this.getPointBBox(a),s=t&&t.getBBox()?t.getBBox():this.getPointBBox(n),r=this.getExpandedBBox(o,i),l=this.getExpandedBBox(s,i),c=this.getExpandedPort(r,a),d=this.getExpandedPort(l,n),u=this.getConnectablePoints(r,l,c,d);u=this.filterConnectablePoints(u,r),u=this.filterConnectablePoints(u,l);var h=this.AStar(u,c,d,r,l);return h}},"polyline")},kt=function(e){it(e),ut(e),yt(e),xt(e)},wt=function(e){e.registerBehavior("clickSelected",{getDefaultCfg:function(){return{multiple:!1}},getEvents:function(){return{"node:click":"onClick","edge:click":"onClick","edge:mouseover":"onEdgeMouseOver","edge:mouseleave":"onEdgeMouseLeave","canvas:click":"onCanvasClick","node:mouseover":"onNodeMouseOver"}},onClick:function(e){this._clearSelected(),this.graph.setItemState(e.item,"selected",!0);var t=this.graph.get("selectedItems");t||(t=[]),t=[e.item.get("id")],this.graph.set("selectedItems",t),this.graph.emit("afteritemselected",t)},onNodeMouseOver:function(e){"edit"===this.graph.getCurrentMode()?this.graph.setItemState(e.item,"hover",!0):this.graph.setItemState(e.item,"hover",!1)},onEdgeMouseOver:function(e){"edit"!==this.graph.getCurrentMode()||e.item.hasState("selected")||this.graph.setItemState(e.item,"hover",!0)},onEdgeMouseLeave:function(e){"edit"!==this.graph.getCurrentMode()||e.item.hasState("selected")||this.graph.setItemState(e.item,"hover",!1)},onCanvasClick:function(){this._clearSelected()},_clearSelected:function(){var e=this,t=this.graph.findAllByState("node","selected");t.forEach((function(t){e.graph.setItemState(t,"selected",!1)})),t=this.graph.findAllByState("edge","selected"),t.forEach((function(t){e.graph.setItemState(t,"selected",!1)})),this.graph.set("selectedItems",[]),this.graph.emit("afteritemselected",[])}})},_t=function(e){e.registerBehavior("deleteItem",{getEvents:function(){return{keydown:"onKeydown","canvas:mouseleave":"onCanvasLeave","canvas:mouseenter":"onCanvasFocus"}},onKeydown:function(e){var t=this.graph.get("selectedItems"),a=this.graph.get("focusGraphWrapper");8===e.keyCode&&t&&t.length>0&&a&&(this.graph.executeCommand?this.graph.executeCommand("delete",{}):this.graph.remove(t[0]),this.graph.set("selectedItems",[]),this.graph.emit("afteritemselected",[]))},onCanvasLeave:function(e){this.graph.set("focusGraphWrapper",!1)},onCanvasFocus:function(){this.graph.set("focusGraphWrapper",!0)}})},Ct=function(e){e.registerBehavior("dragNode",{getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},align:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},onDragStart:function(e){this.shouldBegin.call(this,e)&&(this.target=e.item,this.origin={x:e.x,y:e.y})},onDrag:function(e){if(this.origin&&this.get("shouldUpdate").call(this,e)){var t=this.origin,a=this.target.get("model");this.point||(this.point={x:a.x,y:a.y});var n=e.x-t.x+this.point.x,i=e.y-t.y+this.point.y;this.origin={x:e.x,y:e.y},this.point={x:n,y:i},this.delegate&&this._updateDelegate(this.target,n,i)}},onDragEnd:function(e){if(this.shouldEnd.call(this,e)&&this.origin){var t=e.item.get("delegateShape");if(t){var a=t.getBBox(),n=a.x+a.width/2,i=a.y+a.height/2;t.remove(),this.target.set("delegateShape",null),this._updateItem(this.target,{x:n,y:i})}this.point=null,this.origin=null,this.graph.emit("afternodedragend")}},_updateItem:function(e,t){this.graph.executeCommand?this.graph.executeCommand("update",{itemId:e.get("id"),updateModel:t}):this.get("updateEdge")?this.graph.updateItem(e,t):(e.updatePosition(t),this.graph.paint())},_updateDelegate:function(e,t,a){var n=this,i=e.get("delegateShape"),o=e.get("keyShape").getBBox();if(!i){var r=n.graph.get("group"),l=at.nodeDelegationStyle;i=r.addShape("rect",{attrs:Object(s["a"])({width:o.width,height:o.height,x:t-o.width/2,y:a-o.height/2,nodeId:e.get("id")},l)}),i.set("capture",!1),e.set("delegateShape",i)}i.attr({x:t-o.width/2,y:a-o.height/2}),this.graph.paint(),this.graph.emit("afternodedrag",i)}})},St=function(e){e.registerBehavior("dragEdge",{getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},dragEdge:!1}},getEvents:function(){return{"anchor:dragstart":"onDragStart","anchor:drag":"onDrag","anchor:dragend":"onDragEnd","anchor:dragenter":"onDragEnter","anchor:dragleave":"onDragLeave"}},onDragEnter:function(e){this.origin&&(this.sameNode(e)||(e.item.setHotspotActived(!0),this.origin.targetNode=e.target.getParent().getParent().get("item"),this.origin.targetAnchor=e.item.get("index")))},onDragLeave:function(e){this.origin&&(this.sameNode(e)||(e.item.setHotspotActived(!1),this.origin.targetNode=null,this.origin.targetAnchor=null))},onDragStart:function(e){var t=e.target.getParent().getParent().get("item"),a=e.item.get("index"),n=t.getAnchorPoints()[a];this.target=e.item,this.origin={x:n.x,y:n.y,sourceNode:t,sourceAnchor:a},this.dragEdgeBeforeShowAnchor(e),this.graph.set("onDragEdge",!0)},onDrag:function(e){this.origin&&this._updateEdge(this.target,e)},onDragEnd:function(e){if(this.origin){var t=e.item.get("edgeDelegate");t&&(t.remove(),this.target.set("edgeDelegate",null)),this._updateEdge(this.target,e,!0),this.graph.setItemState(this.origin.sourceNode,"show-anchor",!1),this.target=null,this.origin=null,this.graph.set("onDragEdge",!1)}},sameNode:function(e){return"marker"===e.target.type&&e.target.getParent()&&e.target.getParent().getParent().get("item").get("id")===this.origin.sourceNode.get("id")},dragEdgeBeforeShowAnchor:function(e){this.graph.getNodes().forEach((function(e){if("startEvent"!==e.getModel().clazz&&"timerStartEvent"!==e.getModel().clazz&&"messageStartEvent"!==e.getModel().clazz){var t=e.getContainer();t.showAnchor(t),t.anchorShapes.forEach((function(e){return e.get("item").showHotpot()}))}}))},_updateEdge:function(e,t,a){var n=t.x,i=t.y;!this.delegate||a?(this._addEdge(t),this._clearAllAnchor(),this.graph.paint()):this._updateEdgeDelegate(e,n,i)},_updateEdgeDelegate:function(e,t,a){var n=this,i=e.get("edgeDelegate");if(!i){var o=n.graph.get("group");i=o.addShape("line",{attrs:Object(s["a"])({x1:this.origin.x,y1:this.origin.y,x2:t,y2:a},at.edgeDelegationStyle)}),i.set("capture",!1),e.set("edgeDelegate",i)}i.attr({x2:t,y2:a}),this.graph.paint()},_clearAllAnchor:function(){this.graph.getNodes().forEach((function(e){var t=e.getContainer();t.clearAnchor(t)}))},_addEdge:function(){if(this.origin.targetNode){var e={clazz:"flow",source:this.origin.sourceNode.get("id"),target:this.origin.targetNode.get("id"),sourceAnchor:this.origin.sourceAnchor,targetAnchor:this.origin.targetAnchor};this.graph.executeCommand?this.graph.executeCommand("add",{type:"edge",addModel:e}):this.graph.add("edge",e)}}})},Tt=(a("28a5"),function(e){e.registerBehavior("dragPanelItemAddNode",{getDefaultCfg:function(){return{}},getEvents:function(){return{"canvas:mousemove":"onMouseMove","canvas:mouseup":"onMouseUp","canvas:mouseleave":"onMouseLeave"}},onMouseMove:function(e){if(this.graph.get("onDragAddNode")){var t=this.graph.get("addDelegateShape"),a=this.graph.get("addModel"),n=parseInt(a.size.split("*")[0]),i=parseInt(a.size.split("*")[1]),o=this.graph.getPointByClient(e.x,e.y),r=o.x,l=o.y;if(!t){var c=this.graph.get("group");t=c.addShape("rect",{attrs:Object(s["a"])({width:n,height:i,x:r-n/2,y:l-i/2},at.nodeDelegationStyle)}),t.set("capture",!1),this.graph.set("addDelegateShape",t)}t.attr({x:r-n/2,y:l-i/2}),this.graph.paint(),this.graph.emit("afternodedrag",t)}},onMouseUp:function(e){if(this.graph.get("onDragAddNode")){var t=this.graph.getPointByClient(e.clientX,e.clientY);t.x>0&&t.y>0&&this._addNode(t)}},onMouseLeave:function(e){this.graph.get("onDragAddNode")&&(this._clearDelegate(),this.graph.emit("afternodedragend"))},_clearDelegate:function(){if(this.graph.get("onDragAddNode")){var e=this.graph.get("addDelegateShape");e&&(e.remove(),this.graph.set("addDelegateShape",null),this.graph.paint())}},_addNode:function(e){if(this.graph.get("onDragAddNode")){var t=this.graph.get("addModel"),a=t.clazz,n=void 0===a?"userTask":a;t.shape=c(n);var i=(new Date).getTime(),o=n+i,r=e.x,l=e.y;this.graph.executeCommand?this.graph.executeCommand("add",{type:"node",addModel:Object(s["a"])(Object(s["a"])({},t),{},{x:r,y:l,id:o})}):this.graph.add("node",Object(s["a"])(Object(s["a"])({},t),{},{x:r,y:l,id:o}))}}})}),Dt=function(e){e.registerBehavior("hoverAnchorActived",{getEvents:function(){return{"anchor:mouseenter":"onAnchorEnter","anchor:mousemove":"onAnchorEnter","anchor:mouseleave":"onAnchorLeave"}},onAnchorEnter:function(e){this.graph.get("onDragEdge")||this.graph.setItemState(e.item,"active-anchor",!0)},onAnchorLeave:function(e){if(!this.graph.get("onDragEdge")){var t=e.item.getContainer().getParent();t&&this.graph.setItemState(e.item,"active-anchor",!1)}}})},Et=function(e){e.registerBehavior("hoverNodeActived",{getEvents:function(){return{"node:mouseenter":"onNodeEnter","node:mouseleave":"onNodeLeave","anchor:mouseleave":"onAnchorLeave"}},onAnchorLeave:function(e){var t=e.item.getContainer().getParent();t&&!this.graph.get("onDragEdge")&&this.graph.setItemState(t.get("item"),"show-anchor",!1)},onNodeEnter:function(e){var t=e.item.getModel().clazz;"endEvent"===t||this.graph.get("onDragEdge")||this.graph.setItemState(e.item,"show-anchor",!0)},onNodeLeave:function(e){"marker"===e.target.type||this.graph.get("onDragEdge")||this.graph.setItemState(e.item,"show-anchor",!1)}})},At=function(e){var t=e.Util,a=t.mix,n=t.each,i=t.vec2;e.registerBehavior("itemAlign",{getDefaultCfg:function(){return{alignLineStyle:{stroke:"#FA8C16",lineWidth:1},tolerance:5,_alignLines:[]}},getEvents:function(){return{afternodedrag:"onDrag",afternodedragend:"onDragEnd"}},onDrag:function(e){this._clearAlignLine(),this._itemAlign(e)},onDragEnd:function(){this._clearAlignLine()},_itemAlign:function(e){var t=this,a=e.getBBox(),i={x:a.x+a.width/2,y:a.y},o={x:a.x+a.width/2,y:a.y+a.height/2},s={x:a.x+a.width/2,y:a.y+a.height},r={x:a.x,y:a.y+a.height/2},l={x:a.x+a.width,y:a.y+a.height/2},c=this.graph.getNodes();n(c,(function(c){var d=[],u=[],h=null,p=c.getBBox();if(n(t.getHorizontalLines(p),(function(e){d.push(t.getDistance(e,i)),d.push(t.getDistance(e,o)),d.push(t.getDistance(e,s))})),n(t.getVerticalLines(p),(function(e){u.push(t.getDistance(e,r)),u.push(t.getDistance(e,o)),u.push(t.getDistance(e,l))})),d.sort((function(e,t){return e.dis-t.dis})),u.sort((function(e,t){return e.dis-t.dis})),d.length>0&&d[0].dis<t.tolerance){e.attr({y:d[0].line[1]-d[0].point.y+a.y}),h={horizontals:[d[0]]};for(var g=1;g<3;g++)d[0].dis===d[g].dis&&h.horizontals.push(d[g])}if(u.length>0&&u[0].dis<t.tolerance){e.attr({x:u[0].line[0]-u[0].point.x+a.x}),h?h.verticals=[u[0]]:h={verticals:[u[0]]};for(var m=1;m<3;m++)u[0].dis===u[m].dis&&h.verticals.push(u[m])}h&&(h.bbox=a,t._addAlignLine(h))}))},_addAlignLine:function(e){var t=this.graph.get("group"),i=e.bbox,o=this.alignLineStyle,s=this._alignLines;e.horizontals&&n(e.horizontals,(function(e){var n,r,l=e.line,c=e.point,d=(l[0]+l[2])/2;c.x<d?(n=c.x-i.width/2,r=Math.max(l[0],l[2])):(n=c.x+i.width/2,r=Math.min(l[0],l[2]));var u=t.addShape("line",{attrs:a({x1:n,y1:l[1],x2:r,y2:l[1]},o),capture:!1});s.push(u)})),e.verticals&&n(e.verticals,(function(e){var n,r,l=e.line,c=e.point,d=(l[1]+l[3])/2;c.y<d?(n=c.y-i.height/2,r=Math.max(l[1],l[3])):(n=c.y+i.height/2,r=Math.min(l[1],l[3]));var u=t.addShape("line",{attrs:a({x1:l[0],y1:n,x2:l[0],y2:r},o),capture:!1});s.push(u)}))},getHorizontalLines:function(e){return[[e.minX,e.minY,e.maxX,e.minY],[e.minX,e.centerY,e.maxX,e.centerY],[e.minX,e.maxY,e.maxX,e.maxY]]},getVerticalLines:function(e){return[[e.minX,e.minY,e.minX,e.maxY],[e.centerX,e.minY,e.centerX,e.maxY],[e.maxX,e.minY,e.maxX,e.maxY]]},getDistance:function(e,t){return{line:e,point:t,dis:this.pointLineDistance(e[0],e[1],e[2],e[3],t.x,t.y)}},pointLineDistance:function(e,t,a,n,o,s){var r=[a-e,n-t];if(i.exactEquals(r,[0,0]))return NaN;var l=[-r[1],r[0]];return i.normalize(l,l),Math.abs(i.dot([o-e,s-t],l))},_clearAlignLine:function(){n(this._alignLines,(function(e){e.remove()})),this._alignLines=[],this.graph.paint()}})},Ot=function(e){wt(e),_t(e),Ct(e),St(e),Tt(e),Dt(e),Et(e),At(e)};kt(l.a),Ot(l.a);var zt={name:"WfdVue",components:{ToolbarPanel:M,ItemPanel:R,DetailPanel:He},provide:function(){return{i18n:Qe[this.lang]}},props:{isView:{type:Boolean,default:!1},mode:{type:String,default:"edit"},height:{type:Number,default:800},lang:{type:String,default:"zh"},data:{type:Object,default:function(){return{nodes:[],edges:[]}}},users:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{resizeFunc:function(){},selectedModel:{},previous:"",processModel:{id:"",name:"",clazz:"process",dataObjs:[],signalDefs:[],messageDefs:[]},graph:null,cmdPlugin:null}},watch:{data:function(e,t){e!==t&&this.graph&&(this.graph.changeData(this.initShape(t)),this.graph.setMode(this.mode),this.graph.emit("canvas:click"),this.cmdPlugin&&this.cmdPlugin.initPlugin(this.graph),this.isView&&this.graph.fitView(5))}},destroyed:function(){window.removeEventListener("resize",this.resizeFunc),this.graph.getNodes().forEach((function(e){e.getKeyShape().stopAnimate()}))},mounted:function(){var e=this,t=[];if(!this.isView){this.cmdPlugin=new f;var a=new w({container:this.$refs["toolbar"].$el}),n=new D({container:this.$refs["addItemPanel"].$el}),i=new O({container:this.$refs["canvas"]});t=[this.cmdPlugin,a,n,i]}var o=this.$refs["canvas"].offsetWidth;this.graph=new l.a.Graph({plugins:t,container:this.$refs["canvas"],height:this.height,width:o,modes:{default:["drag-canvas","clickSelected"],view:[],edit:["drag-canvas","hoverNodeActived","hoverAnchorActived","dragNode","dragEdge","dragPanelItemAddNode","clickSelected","deleteItem","itemAlign"]},defaultEdge:{shape:"flow-polyline-round"}}),this.graph.saveXML=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return tt(e.graph.save(),e.processModel,t)},this.isView?this.graph.setMode("view"):this.graph.setMode(this.mode),this.graph.data(this.initShape(this.data)),this.graph.render(),this.isView&&this.data&&this.data.nodes&&this.graph.fitView(5),this.initEvents()},methods:{initShape:function(e){return e&&e.nodes?{nodes:e.nodes.map((function(e){return Object(s["a"])({shape:c(e.clazz)},e)})),edges:e.edges}:e},verifyProcess:function(e){if(void 0===e.label||null===e.label||""===e.label)return"标题不能为空";if(void 0===e.sort||null===e.sort||""===e.sort)return"顺序不能为空";if("userTask"===e.clazz||"receiveTask"===e.clazz){if(void 0===e.assignType||null===e.assignType||""===e.assignType)return"审批节点或处理节点的处理人类型不能为空";if(void 0===e.assignValue||null===e.assignValue||""===e.assignValue||0===e.assignValue.length)return"审批节点或处理节点的处理人不能为空"}return"flow"!==e.clazz||void 0!==e.flowProperties&&null!==e.flowProperties&&""!==e.flowProperties?"":"流转属性不能为空"},initEvents:function(){var e=this;this.graph.on("afteritemselected",(function(t){if(t&&t.length>0){if(""!==e.previous){var a="",n=e.graph.findById(e.previous[0]);if(void 0!==n){a=Object(s["a"])({},n.getModel());var i=e.verifyProcess(a);if(""!==i)return e.selectedModel=a,void e.$message.error(i)}}var o=e.graph.findById(t[0]);e.selectedModel=Object(s["a"])({},o.getModel()),e.previous=t}else""!==e.previous&&(e.selectedModel=e.processModel)}));var t=this.$refs["canvas"],a=this.graph,n=this.height-1;this.resizeFunc=function(){a.changeSize(t.offsetWidth,n)},window.addEventListener("resize",this.resizeFunc)},onItemCfgChange:function(e,t){var a="";if(a=0!==this.previous.length?[this.previous[0]]:this.graph.get("selectedItems"),a&&a.length>0){var n=this.graph.findById(a[0]);this.graph.executeCommand?this.graph.executeCommand("update",{itemId:a[0],updateModel:Object(o["a"])({},e,t)}):this.graph.updateItem(n,Object(o["a"])({},e,t)),this.selectedModel=Object(s["a"])({},n.getModel())}else{var i=Object(s["a"])(Object(s["a"])({},this.processModel),{},Object(o["a"])({},e,t));this.selectedModel=i,this.processModel=i}}}},Bt=zt,Ft=(a("8ee1"),a("429a"),Object(j["a"])(Bt,n,i,!1,null,"1250141f",null));t["default"]=Ft.exports},c142:function(e,t,a){"use strict";var n=a("5ae6"),i=a.n(n);i.a},c4beb:function(e,t,a){e.exports=a.p+"static/web/img/icon_java.d3cc233a.svg"},c52e:function(e,t,a){e.exports=a.p+"static/web/img/icon_user.2b39cf22.svg"},c5d6:function(e,t,a){e.exports=a.p+"static/web/img/start.894f1842.svg"},cae3:function(e,t,a){},d338:function(e,t,a){e.exports=a.p+"static/web/img/icon_timer.b4fcbba6.svg"},d76d:function(e,t,a){},e4c5:function(e,t,a){"use strict";var n=a("b2a8"),i=a.n(n);i.a},f601:function(e,t,a){e.exports=a.p+"static/web/img/icon_mail.0f68d5c7.svg"}}]);